<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>image test</title>
</head>

<body>

  <canvas id="canvas" width="800" height="600"></canvas>
  <script>
  var canvas;
  var ctx;
  var dx = 2;
  var dy = 2;
  var x = 600;
  var y = 300;
  var orientation = 0;
  var WIDTH = 800;
  var HEIGHT = 600;
  var redWidth = 70;
  var redHeight = 40;
  var red = new Image();

  red.onload = function() {
    ctx.drawImage(red, x, y);
  };
  red.src = '/student/globalit/2016/05_05/projectSpin/images/red1.png';

  function rect(x, y, w, h) {
    ctx.beginPath();
    ctx.rect(x, y, w, h);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();
  }

  function clear() {
    ctx.clearRect(0, 0, WIDTH, HEIGHT);
  }

  function init() {
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");
    return setInterval(draw, 10);
    return setInterval(drawRotatedImage(red, x, y, orientation), 10);
  }

  var keys = new Array();

  function doKeyDown(evt) {
    keys[evt.keyCode] = true;
  }

  function doKeyUp(evt) {
    keys[evt.keyCode] = false;
  }

  function move() {
    if (87 in keys && keys[87]) { //up
      if (y > 0) {
        y -= dy;
      }

    }
    if (83 in keys && keys[83]) { //down
      if (y < 560) {
        y += dy;
      }
    }
    if (65 in keys && keys[65]) { //left
      if (x > 0) {
        x -= dx;
      }
    }
    if (68 in keys && keys[68]) { //right
      if (x < 760) {
        x += dx;
      }
    }
  }

  function rotateImage() {
		if (70 in keys && keys[70]) { //rotate left
      orientation-=5;
    }
    if (72 in keys && keys[72]) { //rotate right
      orientation+=5;
    }
  }

  function draw() {
    //movement, other between frame logic
    move();
    //stage maintenence
    clear();
    ctx.fillStyle = "white";
    ctx.strokeStyle = "black";
    rect(0, 0, WIDTH, HEIGHT);
    //draw actor
    ctx.drawImage(red, x, y);
  }
  
  var TO_RADIANS = Math.PI/180; 
  function drawRotatedImage(image, x, y, angle) {
	rotateImage();
	ctx.save(); /uhikjhkjhkjhkjh/
	ctx.translate(x, y);
	ctx.rotate(angle * TO_RADIANS);
	ctx.drawImage(image, -(image.width/2), -(image.height/2));
	ctx.restore(); 
  }

  init();
  window.addEventListener('keydown', doKeyDown, true);
  window.addEventListener('keyup', doKeyUp, true);
  </script>
</body>
</html>


<!--
var TO_RADIANS = Math.PI/180; 
function drawRotatedImage(image, x, y, angle) { 
 
	// save the current co-ordinate system 
	// before we screw with it
	context.save(); 
 
	// move to the middle of where we want to draw our image
	context.translate(x, y);
 
	// rotate around that point, converting our 
	// angle from degrees to radians 
	context.rotate(angle * TO_RADIANS);
 
	// draw it up and to the left by half the width
	// and height of the image 
	context.drawImage(image, -(image.width/2), -(image.height/2));
 
	// and restore the co-ords to how they were when we began
	context.restore(); 
}
-->
